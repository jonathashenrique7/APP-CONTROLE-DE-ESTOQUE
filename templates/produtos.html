{% extends "base.html" %}
{% block content %}
<div class="card">
    <h1>Gerenciar Produtos</h1>
    <form action="/produtos/novo" method="post">
        <input type="text" name="nome" placeholder="Nome do Produto" required>
        <input type="number" name="qtd" placeholder="Qtd" required>
        <input type="number" step="0.01" name="preco" placeholder="PreÃ§o" required>
        <select name="cat_id">
            {% for cat in categorias %}
        <option value="{{ cat.id }}">{{ cat.nome }}</option>
            {% endfor %}
        </select>
            <button type="submit">Adicionar</button>
    </form>
    <table>
    <tr>
        <th>Nome</th><th>Qtd</th><th>PreÃ§o</th><th>Categoria</th><th>AÃ§Ãµes</th>
    </tr>
    {% for p in produtos %}
    <tr>
        <td>{{ p.nome }}</td>
        <td>
            <form action="/produtos/atualizar/{{ p.id }}" method="post" style="display: flex; gap: 5px;">
                <input type="number" name="nova_qtd" value="{{ p.quantidade }}" 
                    style="width: 60px; padding: 4px; text-align: center;">
                <button type="submit" style="padding: 5px 10px; font-size: 12px; background: #3498db;">
                    ðŸ’¾
                </button>
            </form>
        </td>
        <td>R$ {{ p.preco }}</td>
        <td>{{ p.categoria.nome }}</td>
        <td><a href="/produtos/deletar/{{ p.id }}" style="color: #ff5555;">Excluir</a></td>
    </tr>
    {% endfor %}
    </table>
</div>
{% endblock %}